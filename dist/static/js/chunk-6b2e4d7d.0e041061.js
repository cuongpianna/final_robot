(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b2e4d7d"],{"077e":function(e,t,a){"use strict";var r=a("efed"),s=a.n(r);s.a},7954:function(e,t,a){"use strict";var r=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.checkNumber=o,t.exportExcel=n,t.parseTime=l,t.formatTime=c,t.param2Obj=m,t.checkEmail=d,t.hasClass=u,t.addClass=f,t.removeClass=v,t.hasPermissionAction=g,t.data2blob=p,a("34ef"),a("6762"),a("2fdb"),a("3b2b"),a("4917"),a("28a5"),a("f576"),a("a481"),a("6b54");var s=r(a("7037"));a("c5f6"),a("7cdf");var i=a("5c96");function o(e,t,a){var r=parseFloat(t);return 0===r?a():r?void setTimeout((function(){Number.isInteger(r)?r<=0?a(new Error("Vui lòng nhập số lớn hơn hoặc bằng 0")):r>1e10?a(new Error("Vui lòng nhập số nhỏ hơn 10 tỷ")):a():a(new Error("Vui lòng nhập số"))}),1e3):a(new Error("Phải là số lớn hơn hoặc bằng 0"))}function n(e){}function l(e,t){if(0===arguments.length)return null;var a,r=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===(0,s.default)(e)?a=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),a=new Date(e));var i={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},o=r.replace(/{([ymdhisa])+}/g,(function(e,t){var a=i[t];return"a"===t?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return o}function c(e,t){e=10===(""+e).length?1e3*parseInt(e):+e;var a=new Date(e),r=Date.now(),s=(r-a)/1e3;return s<30?"chỉ cần":s<3600?Math.ceil(s/60)+"vài phút trước":s<86400?Math.ceil(s/3600)+"vài giờ trước":s<172800?"1 ngày trước":t?l(e,t):a.getMonth()+1+"tháng"+a.getDate()+"ngày "+a.getHours()+" giờ"+a.getMinutes()+" phút"}function m(e){var t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function d(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function u(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function f(e,t){u(e,t)||(e.className+=" "+t)}function v(e,t){if(u(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ")}}function g(e,t,a,r){return e.includes(t)?(""!==a&&(window.location.href="/#/"+a),!0):((0,i.Message)({message:r,type:"error",duration:5e3}),!1)}function p(e,t){e=e.split(",")[1],e=window.atob(e);for(var a=new Uint8Array(e.length),r=0;r<e.length;r++)a[r]=e.charCodeAt(r);return new Blob([a],{type:t})}},d85f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit;return[r("form",{staticClass:"role-info__inners",on:{submit:function(t){return t.preventDefault(),s(e.handleSubmitUser)}}},[r("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar"}},[r("div",{staticClass:"page-title"},[r("div",{staticClass:"title-container"},[r("router-link",{staticClass:"back-link",attrs:{to:"/users/robots/index"}},[r("font-awesome-icon",{staticClass:"icon-back",attrs:{icon:"chevron-left",color:"#424242"}})],1),e._v(" "),r("span",{staticClass:"title-page"},[e._v(e._s(e.formTitle))])],1),e._v(" "),r("div",{staticClass:"action-container"},[r("router-link",{attrs:{to:"/users/robots/index"}},[r("el-button",{staticClass:"btn-back",attrs:{plain:""}},[e._v(e._s(e.generateTitleView("cancel","usermanagement")))])],1),e._v(" "),r("button",{staticClass:"btn-save",attrs:{type:"submit",plain:""}},[e._v(e._s(e.generateTitleView("save","usermanagement"))+"\n            ")])],1)])]),e._v(" "),r("md-card",{staticClass:"role-info"},[r("div",{staticClass:"role-info__inner"},[r("div",{staticClass:"role-info__inners"},[r("div",{staticClass:"info-title"},[e._v(e._s(e.generateTitleView("info","robot")))]),e._v(" "),r("div",{staticClass:"info-content"},[r("div",{staticClass:"form"},[r("el-row",{staticClass:"mb-10",attrs:{gutter:40}},[r("el-col",{attrs:{span:12}},[r("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("robotName","veeValidate")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("v-text-field",{attrs:{label:e.generateTitleView("robotName","robot"),outlined:"",height:10},model:{value:e.formCreate.name,callback:function(t){e.$set(e.formCreate,"name",t)},expression:"formCreate.name"}}),e._v(" "),r("span",{staticClass:"vee-errors"},[e._v(e._s(a[0]))])]}}],null,!0)})],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("code","veeValidate")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("v-text-field",{attrs:{label:e.generateTitleView("code","robot"),outlined:"",disabled:"",height:10},model:{value:e.formCreate.code,callback:function(t){e.$set(e.formCreate,"code",t)},expression:"formCreate.code"}}),e._v(" "),r("span",{staticClass:"vee-errors"},[e._v(e._s(a[0]))])]}}],null,!0)})],1)],1),e._v(" "),r("el-row",{staticClass:"mb-20",staticStyle:{"margin-bottom":"20px"},attrs:{gutter:40}},[r("el-col",{staticClass:"robotVersion",attrs:{span:12}},[r("v-select",{staticClass:"vibot-select",attrs:{items:e.listRobotVersions,"item-text":"name",label:e.generateTitleView("selectVersion","robot"),outlined:"",dense:"","return-object":""},model:{value:e.formCreate.robotVersion,callback:function(t){e.$set(e.formCreate,"robotVersion",t)},expression:"formCreate.robotVersion"}})],1),e._v(" "),r("el-col",{attrs:{span:12}},[e._v("\n                    Icon robot:\n                    "),r("multiselect",{attrs:{options:e.robotIcons,"option-height":100,"show-labels":!1,"close-on-select":!0,"clear-on-select":!0,placeholder:"Chọn icon"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[r("div",[r("img",{staticClass:"option__image",staticStyle:{width:"30px",height:"30px"},attrs:{src:a("1771")("./"+t.option)}}),e._v(" "),r("span",{staticClass:"option__desc"},[r("span",{staticClass:"option__title"})])])]}},{key:"option",fn:function(t){return[r("img",{staticClass:"option__image pull-left",staticStyle:{width:"30px",height:"30px"},attrs:{src:a("1771")("./"+t.option)}}),e._v(" "),r("div",{staticClass:"option__desc pull-left"},[r("span",{staticClass:"option__title"})]),e._v(" "),r("div",{staticClass:"both-risk"})]}}],null,!0),model:{value:e.formCreate.icon,callback:function(t){e.$set(e.formCreate,"icon",t)},expression:"formCreate.icon"}})],1)],1),e._v(" "),r("el-row",{staticClass:"md-10",staticStyle:{"margin-bottom":"20px"},attrs:{gutter:40}},[r("el-col",{staticClass:"vibotDateWrap",attrs:{span:12,gutter:40}},[r("div",{staticClass:"inner",staticStyle:{display:"flex"}},[r("thumb-upload",{staticStyle:{"margin-left":"10px"},attrs:{title:"Logo của robot",img:e.formCreate.thumb,"api-url":e.urlUpload,"folder-upload":e.folderUpload},on:{"update:img":function(t){return e.$set(e.formCreate,"thumb",t)}}})],1)]),e._v(" "),r("el-col",{staticClass:"statusWrap",attrs:{span:12}},[r("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("workat","veeValidate")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("v-select",{attrs:{items:e.USER_STATUS,"item-text":"label","item-value":"value",label:"Trạng thái hoạt động",outlined:"",dense:""},model:{value:e.formCreate.isActive,callback:function(t){e.$set(e.formCreate,"isActive",t)},expression:"formCreate.isActive"}}),e._v(" "),r("span",{staticClass:"vee-errors"},[e._v(e._s(a[0]))])]}}],null,!0)})],1)],1),e._v(" "),r("el-row",{staticClass:"mb-10",attrs:{gutter:40}},[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"info-title",staticStyle:{"margin-bottom":"15px"}},[e._v("Cấu hình cho mạng LAN")]),e._v(" "),r("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("videoCallUrl","veeValidate")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("v-text-field",{attrs:{label:e.generateTitleView("videoCallUrl","robot"),outlined:"",height:10},model:{value:e.formCreate.videoCallUrl,callback:function(t){e.$set(e.formCreate,"videoCallUrl",t)},expression:"formCreate.videoCallUrl"}}),e._v(" "),r("span",{staticClass:"vee-errors"},[e._v(e._s(a[0]))])]}}],null,!0)})],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"info-title",staticStyle:{"margin-bottom":"15px"}},[e._v("Cấu hình cho mạng Internet")]),e._v(" "),r("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("videoCallUrl","veeValidate")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("v-text-field",{attrs:{label:e.generateTitleView("videoCallOnlineUrl","robot"),outlined:"",height:10},model:{value:e.formCreate.videoCallOnlineUrl,callback:function(t){e.$set(e.formCreate,"videoCallOnlineUrl",t)},expression:"formCreate.videoCallOnlineUrl"}}),e._v(" "),r("span",{staticClass:"vee-errors"},[e._v(e._s(a[0]))])]}}],null,!0)})],1)],1)],1)])])]),e._v(" "),r("div",{staticClass:"robot-info__right"},[r("el-row",{staticClass:"mb-10",attrs:{gutter:40}},[r("el-col",{attrs:{span:24}},[r("v-textarea",{attrs:{label:e.generateTitleView("description","doctor"),outlined:"",rows:"3"},model:{value:e.formCreate.description,callback:function(t){e.$set(e.formCreate,"description",t)},expression:"formCreate.description"}})],1)],1),e._v(" "),r("el-row",{staticClass:"mb-10"},[r("div",{staticClass:"info-title",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e.generateTitleView("area","robot")))])]),e._v(" "),r("el-row",{staticClass:"mb-10",attrs:{gutter:40}},[r("el-col",{attrs:{gutter:40,span:12}},[r("v-select",{attrs:{items:e.listParentArea,"item-text":"name","item-value":"id",label:e.generateTitleView("selectBigArea","robot"),dense:""},on:{change:e.changeAreaParent},model:{value:e.parentId,callback:function(t){e.parentId=t},expression:"parentId"}})],1),e._v(" "),r("el-col",{attrs:{gutter:40,span:12}},[r("v-select",{attrs:{items:e.listChildrenArea,"item-text":"name",label:e.generateTitleView("selectChildArea","robot"),dense:"","return-object":""},model:{value:e.formCreate.map,callback:function(t){e.$set(e.formCreate,"map",t)},expression:"formCreate.map"}})],1)],1),e._v(" "),r("el-row",{staticClass:"mb-10",attrs:{gutter:40}},[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"title-wrapper"},[r("h3",{staticClass:"cameraTitle"},[e._v(e._s(e.generateTitleView("cameraList","camera"))+"\n                  ("+e._s(e.formCreate.cameras.length)+")")]),e._v(" "),r("span",{staticClass:"btn-add-camera",on:{click:e.openAddCamera}},[e._v(e._s(e.generateTitleView("addCamera","area")))])]),e._v(" "),r("md-table",{attrs:{"md-card":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var a=t.item;return r("md-table-row",{attrs:{"md-auto-select":""}},[r("md-table-cell",{attrs:{"md-label":e.generateTitleView("cameraName","camera")}},[e._v(" "+e._s(a.name)+" ")]),e._v(" "),r("md-table-cell",[r("span",{on:{click:function(t){return e.removeCamera(a)}}},[r("md-icon",{staticClass:"removeCamera"},[e._v("delete")])],1)])],1)}}],null,!0),model:{value:e.formCreate.cameras,callback:function(t){e.$set(e.formCreate,"cameras",t)},expression:"formCreate.cameras"}})],1)],1)],1)])],1)]}}])}),e._v(" "),r("v-dialog",{attrs:{"max-width":"550"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[r("v-card",[r("v-card-title",[e._v(e._s(e.generateTitleView("addCameraTitle","camera")))]),e._v(" "),r("div",{staticClass:"search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.listQuery.name,expression:"listQuery.name"}],staticClass:"cameraInput",attrs:{type:"text",placeholder:e.generateTitleView("cameraName","camera")},domProps:{value:e.listQuery.name},on:{input:function(t){t.target.composing||e.$set(e.listQuery,"name",t.target.value)}}}),e._v(" "),r("button",{staticClass:"btn-search"},[r("font-awesome-icon",{attrs:{icon:"search",color:"#fff"},on:{click:e.searchCamera}})],1)]),e._v(" "),r("div",{staticClass:"md-contents"},[e.listCameras.length>0?r("md-table",{attrs:{"md-card":""},on:{"md-selected":e.onSelect},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var a=t.item;return r("md-table-row",{attrs:{"md-selectable":"multiple","md-auto-select":""}},[r("md-table-cell",{attrs:{"md-label":e.generateTitleView("cameraName","camera")}},[e._v(e._s(a.name))])],1)}}],null,!1,1899759929),model:{value:e.listCameras,callback:function(t){e.listCameras=t},expression:"listCameras"}}):r("div",{staticClass:"noCamera"},[e._v("\n          "+e._s(e.generateTitleView("noCamera","camera"))+"\n        ")])],1),e._v(" "),r("md-dialog-actions",[r("md-button",{staticClass:"md-primary",on:{click:function(t){e.showDialog=!1}}},[e._v(e._s(e.generateTitleView("close","camera"))+"\n        ")]),e._v(" "),r("md-button",{staticClass:"md-primary",on:{click:e.addCamera}},[e._v(e._s(e.generateTitleView("addCamera","camera")))])],1)],1)],1)],1)},s=[],i=(a("7f7f"),a("5530")),o=a("b804"),n=a("6087"),l=a("2f62"),c=a("53d2"),m=a("a26e"),d=a("e411"),u=a("7954"),f=a("2c72"),v=a("8e5f"),g=a.n(v),p={model:"robot/",modelRobotVersion:"robotversion/",modelCamera:"camera/"},h={name:"",code:"",description:"",ip:"",privateIP:"",port:"",isActive:!0,videoCallUrl:"",cameras:[],privatePort:"",videoCallOnlineUrl:"",robotVersion:{},thumb:"",icon:""},C={name:"CreateRobot",components:{Sticky:o["default"],ThumbUpload:f["default"],Multiselect:g.a},data:function(){return{robotIcons:["robot1.svg","robot2.svg","robot3.svg","robot4.svg","robot5.svg","robot6.png","robot7.png","robot8.png","robot9.png","robot10.png"],parentId:"",cameraSelected:[],showDialog:!1,menu:!1,formCreate:JSON.parse(JSON.stringify(h)),formTitle:null!=this.$router.currentRoute.params.id?this.generateTitleView("editRobot","robot"):this.generateTitleView("createRobot","robot"),currentUser:"",currentDate:"",isEdit:!1,urlUpload:"file/upUserAvatar",folderUpload:"https://172.20.10.2:9000/agency/Images/User/",USER_STATUS:[{value:!0,label:this.generateTitleView("active","module")},{value:!1,label:this.generateTitleView("deactive","module")}],listQuery:{page:1,limit:10,name:"",status:null}}},computed:Object(i["a"])({},Object(l["mapGetters"])({language:"language",listCameras:p.modelCamera+"availableCameras",listParentArea:p.model+"listParentArea",parentAreaModel:p.model+"parentAreaModel",listChildrenArea:p.model+"listChildrenArea",listRobotVersions:p.modelRobotVersion+"listAllRobotVersion"})),watch:{language:{immediate:!0,handler:function(){this.USER_STATUS=[{value:!0,label:this.generateTitleView("active","module")},{value:!1,label:this.generateTitleView("deactive","module")}]}}},mounted:function(){this.$store.commit("app/CHANGE_APP_TITLE","CẤU HÌNH THAM SỐ CỦA ROBOT");var e=this.$router.currentRoute.params.id;"undefined"!==typeof e&&null!==e?this.getRobot(e):this.formCreate.code=this.generate(4),this.currentUser=this.$store.state.auth.name,this.formTitle===p.edit&&(this.isEdit=!0),this.actFetchAllUsers(),this.actGetParentArea(),this.actGetAllRobotVersion(),this.searchCamera()},methods:Object(i["a"])(Object(i["a"])({},Object(l["mapActions"])({actCreateRobot:p.model+c["ACT_INSERT_ROBOT"],actGetCurrentRobot:p.model+c["ACT_FETCH_ONE_ROBOT"],actEditRobot:p.model+c["ACT_EDIT_ROBOT"],actFetchAllUsers:p.model+c["ACT_FETCH_USERS"],actGetCamera:p.modelCamera+m["ACT_GET_CAMERA_AVAILABLE"],actGetParentArea:p.model+c["ACT_GET_PARENT_AREA"],actGetChildAreaByParent:p.model+c["ACT_GET_CHILD_AREA_BY_PARENT"],actSetParentArea:p.model+c["ACT_SET_PARENT_AREA"],actGetAllRobotVersion:p.modelRobotVersion+d["ACT_GET_ALL_ROBOT_VERSION"]})),{},{handleSubmitUser:function(){var e=this.$router.currentRoute.params.id;void 0!=e&&"undefined"!=e&&null!==e?this.editRobot():this.createRobot()},getRobot:function(e){var t=this;this.actGetCurrentRobot(e).then((function(e){var a=e.payload.records;t.formCreate=JSON.parse(JSON.stringify(a)),null!=t.formCreate.map&&(t.parentId=t.formCreate.map.parentId,t.actGetChildAreaByParent({ParentId:t.parentId}))}))},createRobot:function(){var e=this;this.formCreate["created"]=(new Date).toJSON(),this.formCreate["createdBy"]=this.currentUser,this.actCreateRobot(this.formCreate).then((function(t){t.isSuccess?(e.$notify.success({title:e.generateTitleView("success","message"),message:e.generateTitleView("successMessage","message"),duration:2e3}),setTimeout((function(){window.location.href="/#/users/robots/index"}),2e3)):(e.$notify.error({title:e.generateTitleView("error","message"),message:e.generateTitleView("errorMessage","message"),duration:2e3}),setTimeout((function(){window.location.href="/#/users/robots/index"}),2e3))}))},manageMedia:function(){var e=this.$router.currentRoute.params.id;window.location.href="/#/users/robots/media/"+e},editRobot:function(){var e=this;this.formCreate["modified"]=(new Date).toJSON(),this.formCreate["modifiedBy"]=this.currentUser,this.actEditRobot(this.formCreate).then((function(t){t.isSuccess?(e.$notify.success({title:e.generateTitleView("success","message"),message:e.generateTitleView("successMessage","message"),duration:2e3}),setTimeout((function(){window.location.href="/#/users/robots/index"}),2e3)):(e.$notify.error({title:e.generateTitleView("error","message"),message:e.generateTitleView("errorMessage","message"),duration:2e3}),setTimeout((function(){window.location.href="/#/users/robots/index"}),2e3))}))},searchCamera:function(){this.actGetCamera({current_page:this.listQuery.page,name:this.listQuery.name,is_active:!0,limit:this.listQuery.limit})},openAddCamera:function(){this.showDialog=!0},addCamera:function(){this.showDialog=!1,0===this.formCreate.cameras.length?this.formCreate.cameras=this.cameraSelected:this.formCreate.cameras=this.formCreate.cameras.concat(this.cameraSelected)},onSelect:function(e){this.cameraSelected=e},removeCamera:function(e){var t=this.formCreate.cameras.filter((function(t,a,r){return t.id!==e.id}));this.formCreate.cameras=t,this.listCameras.push(e)},changeAreaParent:function(e){this.actGetChildAreaByParent({ParentId:e})},generate:function(e){var t=1,a=12-t;if(e>a)return this.generate(a)+this.generate(e-a);a=Math.pow(10,e+t);var r=a/10,s=Math.floor(Math.random()*(a-r+1))+r;return("RR"+s).substring(t)},generateTitleView:n["generateTitleView"],hasPermissionAction:u["hasPermissionAction"]})},b=C,_=(a("077e"),a("2877")),w=Object(_["a"])(b,r,s,!1,null,"771e307a",null);t["default"]=w.exports},efed:function(e,t,a){}}]);