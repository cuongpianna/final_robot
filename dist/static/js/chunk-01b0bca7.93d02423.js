(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01b0bca7"],{"10ac":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar"}},[i("div",{staticClass:"page-title"},[i("div",{staticClass:"title-container"},[i("router-link",{staticClass:"back-link",attrs:{to:"/dashboard",title:"DashBoard"}},[i("font-awesome-icon",{staticClass:"icon-back",attrs:{icon:"chevron-left",color:"#424242"}})],1),e._v(" "),i("span",{staticClass:"title-page"},[e._v(e._s(e.generateTitleView("roleManagement","role")))])],1),e._v(" "),i("div",{staticClass:"action-container"},[i("el-button",{staticClass:"btn-create-hotel",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.hasPermissionAction(e.roles,"Role_Create","users/role/create",e.permissionMessage)}}},[e._v("\n            "+e._s(e.generateTitleView("createRole","role"))+"\n          ")])],1)])]),e._v(" "),i("div",{staticClass:"filter"},[i("div",{staticClass:"filter-content"},[i("el-form",{ref:"form",staticClass:"user-form",attrs:{"label-position":"top","label-width":"150px"}},[i("el-form-item",{staticClass:"item-account",attrs:{label:e.generateTitleView("roleName","role"),prop:"name"}},[i("el-input",{attrs:{disabled:!1},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),i("el-form-item",{staticClass:"item-status",attrs:{label:e.generateTitleView("activityStatus","role"),prop:"status"}},[i("el-select",{attrs:{placeholder:e.generateTitleView("placeholder","role")},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.listStatus,(function(t,s){return i("el-option",{key:s,attrs:{value:t.value,label:t.label}},[e._v(e._s(t.label)+"\n              ")])})),1)],1)],1),e._v(" "),i("div",{staticClass:"item-action"},[i("el-button",{staticClass:"btn-reset",attrs:{plain:""},on:{click:e.resetFilter}},[e._v(e._s(e.generateTitleView("reset","role")))]),e._v(" "),i("el-button",{staticClass:"btn-search",attrs:{type:"primary",plain:""},on:{click:e.getRole}},[e._v(e._s(e.generateTitleView("search","role"))+"\n          ")])],1)],1)]),e._v(" "),i("div",{staticClass:"table-users"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],key:0,staticClass:"table-list",staticStyle:{width:"100%"},attrs:{fit:"",data:e.listRoles,"highlight-current-row":""}},[i("el-table-column",{attrs:{label:e.generateTitleView("stt","role"),prop:"id",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){t.row;var s=t.$index;return[i("span",[e._v(e._s(s+1))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.generateTitleView("roleName","role"),"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[i("span",[e._v(e._s(s.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.generateTitleView("role","role"),align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.generateTitleView("permission","role"),placement:"top"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showPopup(s.id)}}},[i("i",{staticClass:"el-icon-setting"})])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.generateTitleView("status","role"),"class-name":"status-col",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[i("el-toggle-button",{attrs:{value:!0,color:"#123D8B",sync:!0},on:{change:function(t){return e.updateRoleStatus(s.id,t)}},model:{value:s.isActive,callback:function(t){e.$set(s,"isActive",t)},expression:"row.isActive"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.generateTitleView("actions","role"),align:"center",width:"130","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.generateTitleView("update","role"),placement:"top"}},[i("el-button",{attrs:{type:"primary",size:"mini",rounded:""},on:{click:function(t){return e.editRole(s.id)}}},[i("i",{staticClass:"el-icon-edit"})])],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.generateTitleView("delete","role"),placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.removeItem(s.id)}}},[i("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.totalRoles>0,expression:"totalRoles>0"}],staticClass:"pagination-hotel",attrs:{total:e.totalRoles,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getRole}})],1),e._v(" "),i("div",{staticClass:"permission-popup"},[i("div",{staticClass:"header-popup"},[e._v("\n        "+e._s(e.generateTitleView("permissionForRole","role"))+"\n        "),i("el-button",{staticClass:"btn-save-permission",on:{click:e.updatePermission}},[e._v("Lưu")]),e._v(" "),i("i",{staticClass:"el-icon-close",on:{click:e.hiddenPopup}})],1),e._v(" "),i("el-scrollbar",[i("div",{staticClass:"permission-list"},e._l(e.modules,(function(t,s){return i("div",{key:s,staticClass:"item item-permission",attrs:{"data-module-id":t.id}},[i("div",{staticClass:"item-header"},[i("div",{staticClass:"title"},[i("font-awesome-icon",{staticClass:"user-icon",attrs:{icon:"user-circle",color:"#888"}}),e._v(" "),i("span",[e._v(e._s(t.description))])],1),e._v(" "),i("div",{staticClass:"full-control"},[i("el-checkbox",{staticClass:"check-all",attrs:{"data-module-id":t.id},on:{change:function(i){return e.setOrUnSetFullPermission(i,t.id)}}})],1)]),e._v(" "),t.moduleFunction.length?i("ul",{staticClass:"item-body",attrs:{"data-module-id":t.id}},e._l(t.moduleFunction,(function(s,n){return i("li",{key:n.id+s.name},[i("span",[e._v(e._s(s.name))]),e._v(" "),i("el-checkbox",{staticClass:"checkbox-item",attrs:{"data-module-id":t.id,"data-function-id":s.id},on:{change:function(i){return e.checkFullPermission(i,t.id)}},model:{value:s.isChecked,callback:function(t){e.$set(s,"isChecked",t)},expression:"itemModule.isChecked"}})],1)})),0):e._e()])})),0)])],1)],1)},n=[],a=(i("7f7f"),i("5530")),r=i("2f62"),o=i("333d"),l=i("b804"),c=i("6087"),u=i("7954"),d=i("b800"),m=i("e659"),g=i("792d"),f={model:"role/",modelModule:"module/",modelFunction:"function"},p={name:"Role",components:{Pagination:o["default"],Sticky:l["default"],ElToggleButton:d["default"]},data:function(){return{role:{},listRole:[],modules:[],listQuery:{page:1,name:"",status:null,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id"},listStatus:[{value:!1,label:this.generateTitleView("deactive","role")},{value:!0,label:this.generateTitleView("active","role")}],roleId:"",roleUpdate:{},isLoading:!0,permissionMessage:this.generateTitleView("error","permissionMessage")}},computed:Object(a["a"])({},Object(r["mapGetters"])({language:"language",roles:"roles",listRoles:f.model+"listRoles",totalRoles:f.model+"totalRoles"})),watch:{language:{immediate:!0,handler:function(e,t){this.listStatus=[{value:!1,label:this.generateTitleView("deactive","role")},{value:!0,label:this.generateTitleView("active","role")}],this.permissionMessage=this.generateTitleView("error","permissionMessage")}}},mounted:function(){this.$store.commit("app/CHANGE_APP_TITLE","HỆ THỐNG GIÁM SÁT VÀ ĐIỀU KHIỂN ROBOT"),this.getRole()},methods:{getRole:function(){var e=this;this.isLoading=!0;var t=this.$store.dispatch(f.model+m["ACT_FETCH_ALL_ROLE"],{current_page:this.listQuery.page,status:this.listQuery.status,name:this.listQuery.name,limit:this.listQuery.limit}).then((function(t){e.isLoading=!1}));return t},resetFilter:function(){this.listQuery.status=null,this.listQuery.name="",this.getRole()},removeItem:function(e){var t=this;this.$confirm(this.generateTitleView("textMessageDelete","message"),this.generateTitleView("titleMessageDelete","message"),{confirmButtonText:this.generateTitleView("textBtnOk","message"),cancelButtonText:this.generateTitleView("textBtnCancel","message"),type:"warning"}).then((function(){var i=t.hasPermissionAction(t.roles,"Role_Delete","",t.permissionMessage);if(i){t.isLoading=!0;var s=t.$store.dispatch(f.model+"Remove",e).then((function(e){t.isLoading=!1,e.isSuccess?(t.getRole(),t.$notify.success({title:t.generateTitleView("success","message"),message:t.generateTitleView("successMessage","message"),duration:2e3})):t.$notify.error({title:t.generateTitleView("error","message"),message:t.generateTitleView("errorMessage","message"),duration:2e3})}));return s}}))},showPopup:function(e){var t=this;this.roleId=e;var i=this.$store.dispatch(f.modelModule+g["FETCH_LIST_MODULE"],{id:e,isActive:!0},{current_page:1,limit:100}).then((function(e){t.modules=e.payload.records})),s=document.querySelector(".permission-popup");return"undefined"!==typeof s&&s.classList.add("active"),i},hiddenPopup:function(){var e=document.querySelector(".permission-popup");"undefined"!==typeof e&&e.classList.remove("active")},updatePermission:function(){var e=this;if(""!==this.roleId){var t=document.querySelectorAll(".item-permission"),i=[];if(t.length){for(var s=0;s<t.length;s++){var n=t[s],a=n.getAttribute("data-module-id"),r=n.querySelectorAll(".checkbox-item");if(r.length){for(var o={roleId:this.roleId,moduleId:a,functionList:[]},l=0;l<r.length;l++){var c=r[l].getAttribute("data-function-id"),u=r[l].getElementsByTagName("input")[0];u.checked&&o.functionList.push(c)}i.push(o)}}i.length&&this.$store.dispatch(f.model+m["ACT_UPDATE_ROLE_MODULE_FUNCTION"],i).then((function(t){t.isSuccess?(e.hiddenPopup(),e.$notify.success({title:e.generateTitleView("success","message"),message:e.generateTitleView("successMessage","message"),duration:2e3})):e.$notify.error({title:e.generateTitleView("error","message"),message:e.generateTitleView("errorMessage","message"),duration:2e3})}))}}this.hiddenPopup(),setTimeout((function(){location.reload()}),500)},setOrUnSetFullPermission:function(e,t){if(e){var i=document.querySelector('.item-body[data-module-id="'+t+'"]'),s=i.getElementsByTagName("input");if(s.length)for(var n=0;n<s.length;n++)s[n].checked||s[n].click()}else{var a=document.querySelector('.item-body[data-module-id="'+t+'"]'),r=a.getElementsByTagName("input");if(r.length){for(var o=0,l=0;l<r.length;l++)r[l].checked&&o++;if(o===r.length)for(var c=0;c<r.length;c++)r[c].click()}}},checkFullPermission:function(e,t){var i=document.querySelector('.check-all[data-module-id="'+t+'"]'),s=i.querySelector("input");if(e){var n=document.querySelector('.item-body[data-module-id="'+t+'"]'),a=n.getElementsByTagName("input");if(a.length){for(var r=0,o=0;o<a.length;o++)a[o].checked&&r++;a.length===r&&(s.checked||s.click())}}else s.checked&&s.click()},editRole:function(e){this.hasPermissionAction(this.roles,"Role_Edit","users/role/edit/"+e,this.permissionMessage)},generateTitleView:c["generateTitleView"],hasPermissionAction:u["hasPermissionAction"],updateRoleStatus:function(e,t){var i=this,s=this.hasPermissionAction(this.roles,"Role_Edit","",this.generateTitleView("permissionMessage","message"));if(s){var n={isActive:t.value,id:e},a=this.$store.dispatch(f.model+"UpdateStatus",n).then((function(e){e.isSuccess?(i.$notify.success({title:i.generateTitleView("success","message"),message:i.generateTitleView("successMessage","message"),duration:4e3}),window.location.href="/#/users/role"):(i.$notify.error({title:i.generateTitleView("error","message"),message:i.generateTitleView("errorMessage","message"),duration:4e3}),window.location.href="/#/users/role")}));return a}}}},h=p,v=(i("b0c2"),i("2877")),b=Object(v["a"])(h,s,n,!1,null,"72b9b6a4",null);t["default"]=b.exports},"2e08":function(e,t,i){var s=i("9def"),n=i("9744"),a=i("be13");e.exports=function(e,t,i,r){var o=String(a(e)),l=o.length,c=void 0===i?" ":String(i),u=s(t);if(u<=l||""==c)return o;var d=u-l,m=n.call(c,Math.ceil(d/c.length));return m.length>d&&(m=m.slice(0,d)),r?m+o:o+m}},"3b2b":function(e,t,i){var s=i("7726"),n=i("5dbc"),a=i("86cc").f,r=i("9093").f,o=i("aae3"),l=i("0bfb"),c=s.RegExp,u=c,d=c.prototype,m=/a/g,g=/a/g,f=new c(m)!==m;if(i("9e1e")&&(!f||i("79e5")((function(){return g[i("2b4c")("match")]=!1,c(m)!=m||c(g)==g||"/a/i"!=c(m,"i")})))){c=function(e,t){var i=this instanceof c,s=o(e),a=void 0===t;return!i&&s&&e.constructor===c&&a?e:n(f?new u(s&&!a?e.source:e,t):u((s=e instanceof c)?e.source:e,s&&a?l.call(e):t),i?this:d,c)};for(var p=function(e){e in c||a(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},h=r(u),v=0;h.length>v;)p(h[v++]);d.constructor=c,c.prototype=d,i("2aba")(s,"RegExp",c)}i("7a56")("RegExp")},4917:function(e,t,i){"use strict";var s=i("cb7c"),n=i("9def"),a=i("0390"),r=i("5f1b");i("214f")("match",1,(function(e,t,i,o){return[function(i){var s=e(this),n=void 0==i?void 0:i[t];return void 0!==n?n.call(i,s):new RegExp(i)[t](String(s))},function(e){var t=o(i,e,this);if(t.done)return t.value;var l=s(e),c=String(this);if(!l.global)return r(l,c);var u=l.unicode;l.lastIndex=0;var d,m=[],g=0;while(null!==(d=r(l,c))){var f=String(d[0]);m[g]=f,""===f&&(l.lastIndex=a(c,n(l.lastIndex),u)),g++}return 0===g?null:m}]}))},7954:function(e,t,i){"use strict";var s=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.checkNumber=r,t.exportExcel=o,t.parseTime=l,t.formatTime=c,t.param2Obj=u,t.checkEmail=d,t.hasClass=m,t.addClass=g,t.removeClass=f,t.hasPermissionAction=p,t.data2blob=h,i("34ef"),i("6762"),i("2fdb"),i("3b2b"),i("4917"),i("28a5"),i("f576"),i("a481"),i("6b54");var n=s(i("7037"));i("c5f6"),i("7cdf");var a=i("5c96");function r(e,t,i){var s=parseFloat(t);return 0===s?i():s?void setTimeout((function(){Number.isInteger(s)?s<=0?i(new Error("Vui lòng nhập số lớn hơn hoặc bằng 0")):s>1e10?i(new Error("Vui lòng nhập số nhỏ hơn 10 tỷ")):i():i(new Error("Vui lòng nhập số"))}),1e3):i(new Error("Phải là số lớn hơn hoặc bằng 0"))}function o(e){}function l(e,t){if(0===arguments.length)return null;var i,s=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===(0,n.default)(e)?i=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),i=new Date(e));var a={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},r=s.replace(/{([ymdhisa])+}/g,(function(e,t){var i=a[t];return"a"===t?["日","一","二","三","四","五","六"][i]:i.toString().padStart(2,"0")}));return r}function c(e,t){e=10===(""+e).length?1e3*parseInt(e):+e;var i=new Date(e),s=Date.now(),n=(s-i)/1e3;return n<30?"chỉ cần":n<3600?Math.ceil(n/60)+"vài phút trước":n<86400?Math.ceil(n/3600)+"vài giờ trước":n<172800?"1 ngày trước":t?l(e,t):i.getMonth()+1+"tháng"+i.getDate()+"ngày "+i.getHours()+" giờ"+i.getMinutes()+" phút"}function u(e){var t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function d(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function m(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function g(e,t){m(e,t)||(e.className+=" "+t)}function f(e,t){if(m(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}}function p(e,t,i,s){return e.includes(t)?(""!==i&&(window.location.href="/#/"+i),!0):((0,a.Message)({message:s,type:"error",duration:5e3}),!1)}function h(e,t){e=e.split(",")[1],e=window.atob(e);for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return new Blob([i],{type:t})}},"7f88":function(e,t,i){},9744:function(e,t,i){"use strict";var s=i("4588"),n=i("be13");e.exports=function(e){var t=String(n(this)),i="",a=s(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(i+=t);return i}},b0c2:function(e,t,i){"use strict";var s=i("7f88"),n=i.n(s);n.a},ce84:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrollTo=r,Math.easeInOutQuad=function(e,t,i,s){return e/=s/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,i){var r=a(),o=e-r,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var a=Math.easeInOutQuad(c,r,o,t);n(a),c<t?s(e):i&&"function"===typeof i&&i()};u()}},f576:function(e,t,i){"use strict";var s=i("5ca1"),n=i("2e08"),a=i("a25f"),r=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);s(s.P+s.F*r,"String",{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0,!0)}})}}]);