(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-071e27dc"],{2241:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"callContainer"},[o("div",{staticClass:"call-wrap"},[o("div",{staticClass:"call-left",staticStyle:{overflow:"hidden"}},[o("div",{staticClass:"video-call-wrap"},[o("span",{staticStyle:{display:"none"},attrs:{id:"meet2"}}),t._v(" "),null==t.mediaSelected?o("span",{attrs:{id:"meet1"}}):o("div",["Video"==t.mediaSelected.fileType?o("video",{ref:"video",attrs:{id:"vdPlay",controls:"",autoplay:""}},[o("source",{attrs:{src:t.mediaSelected.mediaPath,type:"video/mp4"}})]):t._e(),t._v(" "),"Image"==t.mediaSelected.fileType?o("img",{attrs:{src:t.mediaSelected.mediaPath,alt:""}}):t._e()])]),t._v(" "),o("div",{staticClass:"media-wrap"},[o("div",{staticClass:"media_inner"},[o("swiper",{attrs:{options:t.swiperOption}},[o("swiper-slide",{staticClass:"media_inner__left"},[o("img",{staticClass:"mainImg",attrs:{src:i("f853"),alt:""},on:{click:t.openVideoCall}})]),t._v(" "),t._l(t.robotMedias,(function(e,a){return o("swiper-slide",{key:a,staticClass:"media-item"},["Video"==e.fileType?o("img",{staticClass:"media-item__inner",attrs:{src:i("eaa8")},on:{click:function(i){return t.selectItem(e)}}}):o("img",{staticClass:"media-item",attrs:{src:e.mediaPath,alt:e.fileName},on:{click:function(i){return t.selectItem(e)}}})])}))],2)],1)])]),t._v(" "),o("div",{staticClass:"call-right"},[o("div",{staticClass:"call-right__top"},[o("div",{staticClass:"avatar-container"},[o("div",{staticClass:"avatar-wrap"},[o("div",{staticClass:"avatar-inner"},[o("img",{attrs:{src:i("8213"),alt:""}})])])]),t._v(" "),o("div",{staticClass:"robot-information"},[o("div",{staticClass:"robot-name"},[t._v(t._s(t.generateTitleView("robotName","robot"))+" : "+t._s(t.robotInfo.name))]),t._v(" "),o("div",{staticClass:"robot-code"},[t._v(t._s(t.generateTitleView("code","robot"))+" : "+t._s(t.robotInfo.code))]),t._v(" "),o("div",{staticClass:"robot-actions"},[o("button",{staticClass:"action-button"},[o("font-awesome-icon",{attrs:{icon:"user-plus",color:"#828282"}})],1),t._v(" "),o("button",{staticClass:"action-button"},[o("font-awesome-icon",{attrs:{icon:"file-alt",color:"#828282"}})],1),t._v(" "),o("button",{staticClass:"action-button camera-button"},[o("font-awesome-icon",{attrs:{icon:"video",color:"#ffffff"}})],1)]),t._v(" "),o("div",{staticClass:"robot-status"},[o("div",{staticClass:"robot-status__left"},[o("div",{staticClass:"value"},[t._v("Tầng 1")]),t._v(" "),o("div",{staticClass:"label"},[t._v(t._s(t.generateTitleView("workAt","robot")))])]),t._v(" "),o("div",{staticClass:"robot-status__right"},[o("div",{staticClass:"value"},[t._v(t._s(t.generateTitleView("working","robot")))]),t._v(" "),o("div",{staticClass:"label"},[t._v(t._s(t.generateTitleView("status","robot")))])])])])]),t._v(" "),o("div",{staticClass:"call-right__bottom"},[o("div",{staticClass:"robot-camera"}),t._v(" "),o("div",{staticClass:"robot-control"},[o("div",{staticClass:"control-left"},[o("div",{staticClass:"control-wrap"},[o("div",{staticClass:"control-row"},[o("div",{staticClass:"control-col"}),t._v(" "),o("div",{staticClass:"control-col button"},[o("font-awesome-icon",{staticStyle:{"font-size":"22px"},attrs:{icon:"arrow-up",color:"#fff"}})],1),t._v(" "),o("div",{staticClass:"control-col"})]),t._v(" "),o("div",{staticClass:"control-row"},[o("div",{staticClass:"control-col button"},[o("font-awesome-icon",{staticStyle:{"font-size":"22px"},attrs:{icon:"arrow-left",color:"#fff"}})],1),t._v(" "),o("div",{staticClass:"control-col button"},[o("font-awesome-icon",{staticStyle:{"font-size":"22px"},attrs:{icon:"pause",color:"#fff"}})],1),t._v(" "),o("div",{staticClass:"control-col button"},[o("font-awesome-icon",{staticStyle:{"font-size":"22px"},attrs:{icon:"arrow-right",color:"#fff"}})],1)]),t._v(" "),o("div",{staticClass:"control-row"},[o("div",{staticClass:"control-col"}),t._v(" "),o("div",{staticClass:"control-col button"},[o("font-awesome-icon",{staticStyle:{"font-size":"22px"},attrs:{icon:"arrow-down",color:"#fff"}})],1),t._v(" "),o("div",{staticClass:"control-col"})])])]),t._v(" "),t._m(0)])])])])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control-right"},[i("button",{staticClass:"btn-control btn-primary"},[t._v("Đặt đồ")]),t._v(" "),i("button",{staticClass:"btn-control"},[t._v("Lấy đồ")])])}];i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return a}))},"33ef":function(t,e,i){},7514:function(t,e,i){"use strict";var o=i("5ca1"),a=i("0a49")(5),n="find",s=!0;n in[]&&Array(1)[n]((function(){s=!1})),o(o.P+o.F*s,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(n)},7939:function(t,e,i){"use strict";var o=i("dbce"),a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("7514"),i("28a5"),i("6762"),i("2fdb"),i("ac6a"),i("96cf");var n=a(i("c973"));i("7f7f");var s=a(i("ded3"));i("dfa4");var r=i("7212"),l=i("2f62"),c=i("6087"),d=o(i("53d2")),u=o(i("cf10")),f=(a(i("e62a")),i("89ba"),o(i("4fd3"))),m={modelRobot:"robot/",modelMediaRobot:"robotmedia/",model:"setting/"},v={name:"RobotCall",components:{swiper:r.swiper,swiperSlide:r.swiperSlide},data:function(){return{settingObj:{},jistiDomain:"",isLoading:!1,listQuery:{page:1,limit:20,name:"",status:null},robotCode:this.$router.currentRoute.params.id,mediaSelected:null,robotInfo:{},robotMedias:[],swiperOption:{slidesPerView:8,spaceBetween:10,slidesPerGroup:1,loop:!1,loopFillGroupWithBlank:!1,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},thisState:this.$store.state.listRobotMedia}},computed:(0,s.default)({},(0,l.mapGetters)({listRobotMedia:m.modelRobot+"listRobotMedia",setting:"auth/setting"})),watch:{mediaSelected:{immediate:!0,handler:function(t,e){"Video"===t.fileType&&this.$nextTick((function(){}))}}},mounted:function(){this.robotCode=this.$router.currentRoute.params.id,this.getRobotInfo(),this.getSetting()},methods:(0,s.default)((0,s.default)({},(0,l.mapActions)({actGetRobotMedia:m.modelRobot+d.ACT_GET_ROBOT_MEDIA,actGetRobotInfo:m.modelRobot+d.ACT_GET_ROBOT_INFO_BY_CODE,actExportMedia:m.modelMediaRobot+u.ACT_EXPORT_MEDIA,actGetSetting:m.model+f.ACT_GET_SETTING})),{},{getRobotMedia:function(t){var e=this;this.actGetRobotMedia({current_page:this.listQuery.page,name:this.listQuery.name,robot_id:t,is_active:this.listQuery.status,limit:this.listQuery.limit}).then((function(t){e.robotMedias=t.payload.records,e.initSocket()}))},selectItem:function(t){if(this.mediaSelected=t,null==t){var e=this;setTimeout((function(){e.initComunicationCamera(e.robotInfo.cameras)}))}},openVideoCall:function(){this.mediaSelected=null},getRobotInfo:function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(){var e,i,o,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getSetting();case 2:e=t.sent,i=e.jistiDomain,o=e.jistiDomainInternet,a=e.isOnline,this.actGetRobotInfo(this.robotCode).then((function(t){n.robotInfo=t.payload.records;var e=n.robotInfo.cameras;n.getRobotMedia(n.robotInfo.id),n.jistiDomain=a?o:i,n.initJitsi(e)}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initComunicationCamera:function(t){var e=null;t.forEach((function(t){1==t.functionType&&(e=t)}));var i=null!=e?e.labelName:"",o=null!=e?e.jitsiCallRoom:this.robotInfo.code,a=this.jistiDomain,n={devices:{videoInput:i},roomName:o,parentNode:document.querySelector("#meet1")};new JitsiMeetExternalAPI(a,n)},initJitsi:function(t){var e=null,i=null;t.forEach((function(t){1==t.functionType&&(e=t),2==t.functionType&&(i=t)}));var o=null!=e?e.labelName:"",a=null!=e?e.jitsiCallRoom:this.robotInfo.code,n=null!=i?i.labelName:"",s=null!=i?i.jitsiCallRoom:this.robotInfo.code+"_1",r=this.jistiDomain,l={devices:{videoInput:o},roomName:a,parentNode:document.querySelector("#meet1")},c=(new JitsiMeetExternalAPI(r,l),{devices:{videoInput:n},roomName:s,width:"100%",height:"100%",parentNode:document.querySelector("#meet2")});new JitsiMeetExternalAPI(r,c)},initSocket:function(){var t=this.robotMedias,e=(this.robotInfo.id,"wss://172.20.10.2:9000/agency/downloadMedia"),i=new WebSocket(e),o=this;return i.onopen=function(){console.log("Connected.")},i.onclose=function(t){t.wasClean?console.log("Disconnected."):console.log("Connection lost."),console.log("Code: "+t.code+". Reason: "+t.reason),setTimeout((function(){o.initSocket()}),1e3)},i.onmessage=function(e){var i=e.data;if(console.log("Data received: "+i),i.includes("DownloadMedia_")){var a=i.split("_"),n=a.length>=2?a[1]:"",s=a.length>=3?a[2]:"",r=location.href.split("/"),l=r[r.length-1];if(l==n){var c=[];c.push(s)}}if(i.includes("SelectMedia_")){a=i.split("_"),n=a.length>=2?a[1]:"",s=a.length>=3?a[2]:"",r=location.href.split("/"),l=r[r.length-1];if(l==n)if("video"==s)o.selectItem(null);else{var d=t.find((function(t){return t.mediaId==s}));o.selectItem(d)}}i.includes("reload")&&location.reload(),i.includes("DeletedMedia_")&&location.reload()},i.onerror=function(t){console.log("Error: "+t.message)},i},generateTitleView:c.generateTitleView,getSetting:function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.actGetSetting({current_page:this.listQuery.page,name:this.listQuery.name,is_active:this.listQuery.status,limit:this.listQuery.limit});case 2:return e=t.sent,t.abrupt("return",e.payload.records[0]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})};e.default=v},8213:function(t,e,i){t.exports=i.p+"static/img/robot.c5383802.jpg"},"89ba":function(t,e,i){"use strict";function o(t){var e=a(t.encodedData,t.contentType);if(navigator.msSaveBlob)return navigator.msSaveBlob(e,t.FileName);var i=window.URL.createObjectURL(e),o=document.getElementsByTagName("body")[0],s=document.createElement("a");s.id="instDownloadLink",s.href=i,s.download=t.fileName,s.target="_blank",n(s,o),setTimeout((function(){document.getElementById("instDownloadLink").click(),setTimeout((function(){window.URL.revokeObjectURL(i),document.getElementById("instDownloadLink").remove()}),100)}),100)}function a(t,e,i){e=e||"",i=i||512;for(var o=window.atob(t),a=[],n=0;n<o.length;n+=i){for(var s=o.slice(n,n+i),r=new Array(s.length),l=0;l<s.length;l++)r[l]=s.charCodeAt(l);var c=new Uint8Array(r);a.push(c)}var d=new Blob(a,{type:e});return d}function n(t,e){e.parentNode.insertBefore(t,e.nextSibling)}Object.defineProperty(e,"__esModule",{value:!0}),e.dowloadFile=o,i("34ef")},"9e2b":function(t,e,i){"use strict";i.r(e);var o=i("7939"),a=i.n(o);for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);e["default"]=a.a},aa01:function(t,e,i){"use strict";i.r(e);var o=i("2241"),a=i("9e2b");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("e0e4");var s=i("2877"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,"741137b2",null);e["default"]=r.exports},e0e4:function(t,e,i){"use strict";var o=i("33ef"),a=i.n(o);a.a},eaa8:function(t,e){t.exports="data:image/jpeg;base64,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"},f853:function(t,e,i){t.exports=i.p+"static/img/doctor2.c5383802.png"}}]);