server {
    listen 80 default_server;

    #root /usr/share/nginx/html;
    #index index.html;

    location /{
         root /home/SmartHome.HotelApp;
         #root /home/MtTracking/App;
         index index.html;
         try_files $uri $uri/ /index.html;    
    }
    error_page  405 =200 $uri;

    location /auth{
        rewrite ^/auth(.*)$ $1 break;
        proxy_pass http://localhost:5000;
    }

    location /css/thirdparty.bundle.css{
	rewrite ^/hotel/css/thirdparty.bundle.css break;
	proxy_pass http://localhost:7000;
	}

	location /css/site.css{
        rewrite ^/hotel/css/site.css break;
        proxy_pass http://localhost:7000;
        }	

	
	location /js/thirdparty.bundle.js{
        rewrite ^/hotel/js/thirdparty.bundle.js break;
        proxy_pass http://localhost:7000;
        }

     location /js/viewer.part.bundle.js{
        rewrite ^/hotel/js/viewer.part.bundle.js break;
        proxy_pass http://localhost:7000;
        }

	location /css/viewer.part.bundle.css{
        rewrite ^/hotel/css/viewer.part.bundle.css break;
        proxy_pass http://localhost:7000;
        }

  location /js/site{
        rewrite ^/hotel/js/site(.*)$ $1 break;
        proxy_pass http://localhost:7000;
        }


   location /hotel{
        rewrite ^/hotel(.*)$ $1 break;
        proxy_pass http://localhost:7000;
    }

    location /Images/{
        alias /home/SmartHotel.HotelService/publish/wwwroot/Images/;
    }

	location /DXXRDV{
	proxy_pass http://localhost:7000;
}

}

server {
	client_max_body_size 200M;
   	listen 443 ssl;
	server_name oriwave.net;

	ssl_certificate /etc/letsencrypt/live/oriwave.net/fullchain.pem;
    	ssl_certificate_key /etc/letsencrypt/live/oriwave.net/privkey.pem;
	ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
	ssl_prefer_server_ciphers on; 
	ssl_ciphers EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
	ssl_session_cache shared:SSL:50m;
        ssl_session_timeout 1d;
	add_header Strict-Transport-Security "max-age=31536000" always;


   location /{
        root /home/Robot/App;
         index index.html;
         try_files $uri $uri/ /index.html;
	proxy_http_version  1.1;
        proxy_cache_bypass  $http_upgrade;
        proxy_set_header    Connection $http_connection;
        proxy_set_header    Upgrade $http_upgrade;
    }

    location /auth{
        rewrite ^/auth(.*)$ $1 break;
        proxy_pass http://localhost:4001;
    }

        location /agency{
        rewrite ^/agency(.*)$ $1 break;
        proxy_pass http://localhost:4002;
	proxy_http_version  1.1;
        proxy_cache_bypass  $http_upgrade;
        proxy_set_header    Connection $http_connection;
        proxy_set_header    Upgrade $http_upgrade;
    }

}
