(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-160c0548"],{"2e08":function(t,e,n){var i=n("9def"),o=n("9744"),a=n("be13");t.exports=function(t,e,n,r){var s=String(a(t)),c=s.length,l=void 0===n?" ":String(n),u=i(e);if(u<=c||""==l)return s;var d=u-c,f=o.call(l,Math.ceil(d/l.length));return f.length>d&&(f=f.slice(0,d)),r?f+s:s+f}},"3b2b":function(t,e,n){var i=n("7726"),o=n("5dbc"),a=n("86cc").f,r=n("9093").f,s=n("aae3"),c=n("0bfb"),l=i.RegExp,u=l,d=l.prototype,f=/a/g,m=/a/g,b=new l(f)!==f;if(n("9e1e")&&(!b||n("79e5")((function(){return m[n("2b4c")("match")]=!1,l(f)!=f||l(m)==m||"/a/i"!=l(f,"i")})))){l=function(t,e){var n=this instanceof l,i=s(t),a=void 0===e;return!n&&i&&t.constructor===l&&a?t:o(b?new u(i&&!a?t.source:t,e):u((i=t instanceof l)?t.source:t,i&&a?c.call(t):e),n?this:d,l)};for(var g=function(t){t in l||a(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},h=r(u),p=0;h.length>p;)g(h[p++]);d.constructor=l,l.prototype=d,n("2aba")(i,"RegExp",l)}n("7a56")("RegExp")},4917:function(t,e,n){"use strict";var i=n("cb7c"),o=n("9def"),a=n("0390"),r=n("5f1b");n("214f")("match",1,(function(t,e,n,s){return[function(n){var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=s(n,t,this);if(e.done)return e.value;var c=i(t),l=String(this);if(!c.global)return r(c,l);var u=c.unicode;c.lastIndex=0;var d,f=[],m=0;while(null!==(d=r(c,l))){var b=String(d[0]);f[m]=b,""===b&&(c.lastIndex=a(l,o(c.lastIndex),u)),m++}return 0===m?null:f}]}))},"53ca":function(t,e,n){"use strict";function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}n.d(e,"a",(function(){return i}))},7954:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));n("34ef"),n("6762"),n("2fdb"),n("3b2b"),n("4917"),n("28a5"),n("f576"),n("a481"),n("6b54"),n("53ca"),n("c5f6"),n("7cdf");var i=n("5c96");function o(t,e,n,o){return t.includes(e)?(""!==n&&(window.location.href="/#/"+n),!0):(Object(i["Message"])({message:o,type:"error",duration:5e3}),!1)}function a(t,e){t=t.split(",")[1],t=window.atob(t);for(var n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new Blob([n],{type:e})}},"7d58":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar"}},[n("div",{staticClass:"page-title"},[n("div",{staticClass:"title-container"},[n("router-link",{staticClass:"back-link",attrs:{to:"/"}},[n("font-awesome-icon",{staticClass:"icon-back",attrs:{icon:"chevron-left",color:"#424242"}})],1),t._v(" "),n("router-link",{staticClass:"title-page",attrs:{to:t.to,title:"DashBoard"}},[t._v(t._s(t.generateTitleView("robotMediaManagement","robotMedia")))])],1),t._v(" "),n("div",{staticClass:"action-container"},[n("el-button",{staticClass:"btn-create-hotel",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.redirectCreate}},[t._v(t._s(t.generateTitleView("create","robotMedia")))])],1)])]),t._v(" "),n("v-card",{staticClass:"filter"},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{staticClass:"vibotCol",attrs:{md:"3",cols:"12",sm:"6"}},[n("v-text-field",{staticClass:"vibotField",attrs:{label:t.generateTitleView("mediaName","robotMedia")},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1),t._v(" "),n("v-col",{attrs:{"offset-md":"7"}}),t._v(" "),n("v-col",{staticClass:"search-right-wrap",attrs:{md:"4",sm:"6"}},[n("el-button",{staticClass:"btn-reset",attrs:{plain:""},on:{click:t.resetFilter}},[t._v("\n            "+t._s(t.generateTitleView("clear","usermanagement"))+"\n          ")]),t._v(" "),n("el-button",{staticClass:"btn-search",attrs:{type:"primary",plain:""},on:{click:t.getMedias}},[t._v(t._s(t.generateTitleView("search","usermanagement")))])],1)],1)],1)],1),t._v(" "),n("v-card",{staticClass:"table-users"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:0,staticClass:"table-list",staticStyle:{width:"100%"},attrs:{fit:"",data:t.listMedias,"highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"id",align:"center",width:"40"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mediaSelected,expression:"mediaSelected"}],attrs:{type:"checkbox"},domProps:{value:i.mediaId,checked:Array.isArray(t.mediaSelected)?t._i(t.mediaSelected,i.mediaId)>-1:t.mediaSelected},on:{change:function(e){var n=t.mediaSelected,o=e.target,a=!!o.checked;if(Array.isArray(n)){var r=i.mediaId,s=t._i(n,r);o.checked?s<0&&(t.mediaSelected=n.concat([r])):s>-1&&(t.mediaSelected=n.slice(0,s).concat(n.slice(s+1)))}else t.mediaSelected=a}}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.generateTitleView("stt","usermanagement"),prop:"id",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){e.row;var i=e.$index;return[n("span",[t._v(t._s(i+1))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.generateTitleView("mediaName","robotMedia"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type"},[t._v(t._s(i.fileName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.generateTitleView("mediaType","robotMedia"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",[t._v(t._s(i.fileType))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.generateTitleView("mediaPath","robotMedia"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("a",{attrs:{href:i.mediaPath,target:"_blank"}},[t._v("Tải về")])]}}])}),t._v(" "),n("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{label:"Actions",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.generateTitleView("deleteTooltip","robotMedia"),placement:"top"}},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteMedia(i.id)}}},[n("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalMedias>0,expression:"totalMedias>0"}],staticClass:"pagination-hotel",attrs:{total:t.totalMedias,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getPagination}})],1)],1)},o=[],a=(n("ac6a"),n("7f7f"),n("5530")),r=n("333d"),s=n("b804"),c=n("7954"),l=n("6087"),u=n("2f62"),d=n("f264"),f=n("3e69"),m=n("53d2"),b=n("a55b"),g={name:"",title:"Robot",model:"robotmedia/",robotModel:"robot/",slug:"robotmedia",edit:"Sửa",create:"Tạo mới"},h={isActive:!0},p={name:"Index",components:{Pagination:r["a"],Sticky:s["a"]},data:function(){return{robotSelected:[],loading:!0,showDialog1:!1,listQuery:{page:1,limit:20,name:"",status:null},to:"",dialogForm:!1,user_id:"",currentUser:"",formUpdateStatus:JSON.parse(JSON.stringify(h)),mediaSelected:[],socket:null,robotInfo:{}}},computed:Object(a["a"])({},Object(u["c"])({language:"language",listMedias:g.model+"listMedias",totalMedias:g.model+"totalMedias",listRobots:g.robotModel+"listRobots"})),mounted:function(){this.$store.commit("app/CHANGE_APP_TITLE","HỆ THỐNG GIÁM SÁT VÀ ĐIỀU KHIỂN ROBOT"),this.socket=this.initSocket(),this.roleList=this.$store.state.auth.roles,this.currentUser=this.$store.state.auth.name,this.currentUserId=this.$store.state.auth.id,this.robotInfo=this.getRobotInfo(),this.getMedias();var t=this.$router.currentRoute.params.robotId;this.to="/users/robots/call/"+t},methods:Object(a["a"])(Object(a["a"])({},Object(u["b"])({actFetchAllMedia:g.model+f["d"],actUploadMediaToRobot:g.model+f["f"],actInsertMedia:g.model+f["e"],actFetchAllRobot:g.robotModel+m["e"],actDeleteMedia:g.model+f["a"],actGetRobotInfo:g.robotModel+m["d"]})),{},{getMedias:function(){var t=this,e=this.$router.currentRoute.params.robotId;this.actFetchAllMedia({current_page:this.listQuery.page,name:this.listQuery.name,robot_id:e,is_active:this.listQuery.status,limit:this.listQuery.limit}).then((function(e){t.loading=!1}))},getRobots:function(){var t=this;this.actFetchAllRobot({current_page:this.listQuery.page,name:this.listQuery.name,robot_id:robotId,is_active:this.listQuery.status,limit:this.listQuery.limit}).then((function(e){t.loading=!1}))},onSelect:function(t){var e=this;null!=t&&t.forEach((function(t){e.robotSelected.push(t.id)}))},getRobotInfo:function(){var t=this,e=this.$router.currentRoute.params.robotId;this.actGetRobotInfo(e).then((function(e){t.robotInfo=e.payload.records}))},deleteMedia:function(t){var e=this;this.$confirm("Bạn có chắc chắn muốn xóa media?",this.generateTitleView("titleMessageDelete","message"),{confirmButtonText:this.generateTitleView("textBtnOk","message"),cancelButtonText:this.generateTitleView("textBtnCancel","message"),type:"warning"}).then((function(){var n=e.hasPermissionAction(e.roleList,d["j"],"",e.generateTitleView("permissionMessage","message"));n&&e.actDeleteMedia(t).then((function(n){if(n.isSuccess){var i=e.robotInfo.code,o=Object(b["a"])("DeletedMedia_"+i+"_"+t);e.socket.send(o)}}))}))},resetFilter:function(){this.listQuery.status=null,this.listQuery.name="",this.getMedias()},backHistory:function(){window.history.back()},redirectCreate:function(){var t=this.$router.currentRoute.params.robotId;this.hasPermissionAction(this.roleList,d["j"],"users/robots/createMedia/"+t,this.generateTitleView("permissionMessage","message"))},initSocket:function(){var t="wss://172.20.10.2:9000/agency/downloadMedia",e=new WebSocket(t),n=this;return e.onopen=function(){console.log("Connected.")},e.onclose=function(t){t.wasClean?console.log("Disconnected."):console.log("Connection lost."),console.log("Code: "+t.code+". Reason: "+t.reason),setTimeout((function(){n.socket=n.initSocket()}),1e3)},e.onmessage=function(t){var e=t.data;console.log("Data received: "+e)},e.onerror=function(t){console.log("Error: "+t.message)},e},generateTitleView:l["b"],hasPermissionAction:c["b"]})},v=p,w=(n("f7a0"),n("2877")),y=Object(w["a"])(v,i,o,!1,null,"d2d73870",null);e["default"]=y.exports},9744:function(t,e,n){"use strict";var i=n("4588"),o=n("be13");t.exports=function(t){var e=String(o(this)),n="",a=i(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},a55b:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("6b54"),n("28a5"),n("a481");function i(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode("0x"+e)})))}},cdf5:function(t,e,n){},ce84:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),Math.easeInOutQuad=function(t,e,n,i){return t/=i/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(t,e,n){var r=a(),s=t-r,c=20,l=0;e="undefined"===typeof e?500:e;var u=function t(){l+=c;var a=Math.easeInOutQuad(l,r,s,e);o(a),l<e?i(t):n&&"function"===typeof n&&n()};u()}},f264:function(t,e,n){"use strict";n.d(e,"n",(function(){return i})),n.d(e,"p",(function(){return o})),n.d(e,"o",(function(){return a})),n.d(e,"g",(function(){return r})),n.d(e,"i",(function(){return s})),n.d(e,"h",(function(){return c})),n.d(e,"k",(function(){return l})),n.d(e,"j",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return b})),n.d(e,"f",(function(){return g})),n.d(e,"e",(function(){return h})),n.d(e,"m",(function(){return p})),n.d(e,"l",(function(){return v}));var i="UserManagement_Create",o="UserManagement_Edit",a="UserManagement_Delete",r="Doctor_Create",s="Doctor_Edit",c="Doctor_Delete",l="Robot_Edit",u="Robot_Delete",d="Area_Create",f="Area_Edit",m="Area_Delete",b="Camera_Create",g="Camera_Edit",h="Camera_Delete",p="RobotVersion_Edit",v="RobotVersion_Delete"},f576:function(t,e,n){"use strict";var i=n("5ca1"),o=n("2e08"),a=n("a25f"),r=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);i(i.P+i.F*r,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},f7a0:function(t,e,n){"use strict";var i=n("cdf5"),o=n.n(i);o.a}}]);